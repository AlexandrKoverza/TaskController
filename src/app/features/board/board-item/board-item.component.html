<section class="board-item" *ngIf="board$ | async as board">
  <div class="container">
    <div class="board-item-inner">
      <div class="board-item-top board-top">
        <button class="board-top__back" (click)="back()">ðŸ ˜</button>
        <span class="board-top__name">{{ board.name }}</span>
        <button class="board-top__delete" (click)="deleteBoard(board.id)">
          Delete board
        </button>
      </div>
      <div class="tasks-row" cdkDropListGroup>
        <div class="task" cdkDropList [cdkDropListData]="column.list"
          *ngFor="let column of board.column" (cdkDropListDropped)="drop($event)">
          <div class="task-do__top">
            <span class="task-do__name">{{ columnMapper[column.type].title }}</span>
            <form class="task-do__block" [formGroup]="form">
              <input type="text" class="task-do__input" placeholder="create new task" formControlName="text" />
              <button class="task-do__button" (click)="addTask(column.id)">
                <img src="/assets/plus.svg" alt="image" />
              </button>
            </form>
            <div class="controls-block">
              <div class="sort-block">
                <span class="sort-text">task name: </span>
                <button class="sort-button" (click)="sortStartZ(column.list)">
                  a - z
                </button>
                <button class="sort-button" (click)="sortStartA(column.list)">
                  z - a
                </button>
              </div>
              <div class="sort-block">
                <span class="sort-text">task date: </span>
                <button class="sort-button" (click)="sortUp(column.list)">
                  1 - 9
                </button>
                <button class="sort-button" (click)="sortDown(column.list)">
                  9 - 1
                </button>
              </div>
            </div>
          </div>

          <div class="task-list">
            <div cdkDrag class="task-item" [ngStyle]="{ background: columnMapper[column.type].colour }" [cdkDragData]="item"
              *ngFor="let item of column.list">
              <app-task [item]="item" (emitText)="onAddComment($event, column.id)"
                (emitDeleteItem)="onDeleteItem($event, column.id)">
                <div *ngFor="let comment of item.comments">
                  <app-comment [comment]="comment" (emitComment)="onDeleteComment($event, column.id, item)">
                  </app-comment>
                </div>
              </app-task>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
