<section class="board-item">
  <div class="container">
    <div class="board-item-inner" *ngIf="board$ | async as board">
      <div class="board-item-top board-top">
        <a class="board-top__back" [routerLink]="['/']">ðŸ ˜</a>
        <span class="board-top__name">{{ board.name }}</span>
        <button class="board-top__delete" (click)="deleteBoard(board.id)">
          Delete board
        </button>
      </div>
      <div class="tasks-row" cdkDropListGroup>
        <div
          class="task"
          *ngFor="let column of boardColumns"
          cdkDropList
          [cdkDropListData]="tasks"
          (cdkDropListDropped)="drop($event)"
        >
          <div class="task-do__top">
            <span class="task-do__name">{{ column.type }}</span>
            <form
              class="task-do__block"
              [formGroup]="form"
              (ngSubmit)="addTask(column.type, column.color, board.id, column)"
            >
              <input
                type="text"
                class="task-do__input"
                placeholder="create new task"
                formControlName="description"
              />
              <button class="task-do__button">
                <img src="assets/images/plus.svg" alt="image" />
              </button>
            </form>
          </div>
          <div *ngFor="let task of board.tasks">
            <div *ngIf="task.type === column.type">
              <div class="task-list">
                <app-task
                  cdkDrag
                  [cdkDragData]="task"
                  [task]="task"
                  [comments]="board.comments"
                  (emitDeleteItem)="onDeleteTask(task.id)"
                >
                  <div *ngFor="let comment of board.comments">
                    <div *ngIf="comment.taskId === task.id">
                      <app-comment
                        [comment]="comment"
                        (emitComment)="onDeleteComment(comment.id)"
                      >
                      </app-comment>
                    </div>
                  </div>
                </app-task>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
